<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>时间旅行者</title>
  <subtitle>品味简简单单的小幸福</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://xczh.github.io/"/>
  <updated>2016-06-09T12:13:00.000Z</updated>
  <id>https://xczh.github.io/</id>
  
  <author>
    <name>Chris Winnie</name>
    <email>christopher.winnie2012@gmail.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ArchLinux的桌面化配置</title>
    <link href="https://xczh.github.io/2016/05/24/ArchLinux%E7%9A%84%E6%A1%8C%E9%9D%A2%E5%8C%96%E9%85%8D%E7%BD%AE/"/>
    <id>https://xczh.github.io/2016/05/24/ArchLinux的桌面化配置/</id>
    <published>2016-05-24T14:45:00.000Z</published>
    <updated>2016-06-09T12:13:00.000Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/img/computer/archlinux.jpg&quot; alt=&quot;ArchLinux&quot; title=&quot;ArchLinux&quot;&gt;&lt;/p&gt;
&lt;p&gt;ArchLinux是一款简单，轻量的Linux发行版。由于其&lt;strong&gt;轻量&lt;/strong&gt;、&lt;strong&gt;滚动升级&lt;/strong&gt;的特性，特别适合个人作为日常办公、开发使用。&lt;/p&gt;
&lt;p&gt;虽然稳定性不及Debian/CentOS/RHEL等服务器发行版，但是软件更新快、可自由定制程度高的特性，使得ArchLinux从众多Linux发行版中脱颖而出，受到了广大Linux爱好者的欢迎。其滚动升级的特性，使得基本不用重装系统，一句&lt;code&gt;pacman -Syu&lt;/code&gt;就可以将当前系统“滚”到最新版，平滑升级。当然，这个特性使得ArchLinux必须经常升级（按我的经验，超过一个月不更新的话就不要更新了T_T感觉备份资料准备重装吧…），否则会导致版本差异太大，一次性升级太多的软件包造成依赖关系出问题，俗称“滚挂”。&lt;/p&gt;
&lt;p&gt;但是不管怎么说，这丝毫不能算是ArchLinux的缺点。今天重新配置了一遍ArchLinux的桌面（KDE）环境，做下记录备忘。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;基本系统安装&quot;&gt;&lt;a href=&quot;#基本系统安装&quot; class=&quot;headerlink&quot; title=&quot;基本系统安装&quot;&gt;&lt;/a&gt;基本系统安装&lt;/h2&gt;&lt;p&gt;ArchLinux拥有最强大的Wiki，这是所有Linux发行版里面绝无仅有的，基本上所有的问题都可以在Wiki里面找到答案，安装当然也不例外。&lt;/p&gt;
&lt;p&gt;ArchLinux和Ubuntu之类的发行版不一样，安装是需要手动通过命令行完成的，并没有图形化的安装向导。这体现了ArchLinux的高度可定制特性，你可以按需要安装你需要的东西，一个都不多。而且看着自己亲手一条条命令敲出来的系统，会不会很有成就感呢~&lt;/p&gt;
&lt;p&gt;首先贴Wiki的安装指导，新版的安装步骤可能有变化，以这里为准：&lt;br&gt;&lt;a href=&quot;https://wiki.archlinux.org/index.php/Beginners%27_guide&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ArchLinux Beginners’ guide&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;挂载安装镜像光盘启动完毕之后，首先检查网络连接：&lt;br&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ping -c 4 www.baidu.com&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;需要注意的是，ArchLinux的安装必须有良好的网络环境，安装过程需要下载大量的软件包。&lt;br&gt;通常，如果你在DHCP环境中，是可以自动联网的，&lt;code&gt;dhcpcd&lt;/code&gt;客户端会自动启动获取IP设置。&lt;br&gt;如果你需要手动设置IP：&lt;br&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 首先停止dhcpcd服务(把enp0s25换成你的网络接口名，可以用ip link查询)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl stop dhcpcd@enp0s25.service&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 指定静态IP&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ip addr add 192.168.1.2/24 dev enp0s25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 添加默认网关&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ip route add default via 192.168.1.1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;如果你使用Wi-Fi来连接网络也是支持的，参考上面的Wiki说明。&lt;/p&gt;
&lt;p&gt;更新系统时间：&lt;br&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;timedatectl &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt;-ntp &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;接下来开始准备安装介质。ArchLinux可以安装在硬盘和U盘上，安装在U盘上参考Wiki。&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 列出所有块设备&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lsblk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 使用fdisk进行分区&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fdisk /dev/sdb&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;分区的问题不多说，&lt;code&gt;fdisk&lt;/code&gt;很简单的，按&lt;code&gt;m&lt;/code&gt;可以查看帮助。至少应该分一个根分区和Swap交换分区。如果是个人开发机的话推荐这种分区方案。&lt;/p&gt;
&lt;p&gt;分区完毕之后，格式化相应的分区：&lt;br&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 格式化根分区&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mkfs.ext4 /dev/sdb1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 格式化swap分区&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mkswap /dev/sdb2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 启用swap分区&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;swapon /dev/sdb2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 挂载根分区&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mount /dev/sdb1 /mnt&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;如果你有其他的数据分区，也需要挂载。挂载完成之后就可以安装ArchLinux了。&lt;/p&gt;
&lt;p&gt;首先选择安装镜像源，通常选择离你最近，速度最快的源：&lt;br&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;nano /etc/pacman.d/mirrorlist&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在&lt;code&gt;mirrorlist&lt;/code&gt;文件的最上面加一条：&lt;br&gt;&lt;figure class=&quot;highlight ini&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# /etc/pacman.d/mirrorlist&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;Server&lt;/span&gt; = http://mirrors.xjtu.edu.cn/archlinux/&lt;span class=&quot;variable&quot;&gt;$repo&lt;/span&gt;/os/&lt;span class=&quot;variable&quot;&gt;$arch&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;pacman&lt;/code&gt;会从上到下选择&lt;code&gt;Server&lt;/code&gt;来下载镜像，你可以多指定几个&lt;code&gt;Server&lt;/code&gt;，但是记得要加在开头。&lt;/p&gt;
&lt;p&gt;接下来开始安装了：&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 强制刷新源&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pacman -Syy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 安装基本操作系统&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pacstrap -i /mnt base base-devel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 生成开机自动挂载&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;genfstab -U -p /mnt &amp;gt;&amp;gt; /mnt/etc/fstab&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;官网建议检查一下fstab文件是否生成正确，如果不正确，需要手动编辑修改。否则，重启之后会因为没自动挂载分区而失败。&lt;/p&gt;
&lt;p&gt;接下来&lt;code&gt;chroot&lt;/code&gt;进去做一些配置：&lt;br&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# chroot&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;arch-chroot /mnt /bin/bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 设置Locale&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;nano /etc/locale.gen&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;需要什么Locale，就把前面的&lt;code&gt;#&lt;/code&gt;去掉。我个人习惯用英文的，所以我只使用&lt;code&gt;en_US.UTF-8&lt;/code&gt;.不建议你这个时候启用中文编码，可能会造成命令行乱码。如果你需要中文支持，建议在安装完成之后，图形化下进行。&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 应用Locale设置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;locale-gen&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; LANG=en_US.UTF-8 &amp;gt; /etc/locale.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 时区设置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tzselect&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ln &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; /usr/share/zoneinfo/Asia/Shanghai /etc/localtime&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 设置硬件时钟&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hwclock --systohc --utc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 创建初始ramdisk&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mkinitcpio -p linux&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 设置Root密码&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;passwd&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;安装boot-loader:&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 如果你是UEFI/GPT分区&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bootctl install&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 如果你是BIOS/MBR分区&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pacman -S grub os-prober&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;grub-install /dev/sdb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;grub-mkconfig -o /boot/grub/grub.cfg&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;最后，设置主机名、网络：&lt;br&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; myhostname &amp;gt; /etc/hostname&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 以DHCP为例&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl &lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt; dhcpcd@interface.service&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 离开chroot环境&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 重启计算机&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;reboot&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;静态IP配置和Wi-Fi请参考Wiki.&lt;/p&gt;
&lt;p&gt;这样，就安装好了一个可用的ArchLinux系统。&lt;/p&gt;
&lt;h2 id=&quot;图形化配置&quot;&gt;&lt;a href=&quot;#图形化配置&quot; class=&quot;headerlink&quot; title=&quot;图形化配置&quot;&gt;&lt;/a&gt;图形化配置&lt;/h2&gt;&lt;p&gt;重启完毕以后，如果不需要图形化的，就可以到此为止了。&lt;/p&gt;
&lt;p&gt;图形化的安装，下面我以&lt;code&gt;KDE&lt;/code&gt;为例（没错我就是KDE党=。=）说明一下过程。&lt;/p&gt;
&lt;h3 id=&quot;安装Xorg&quot;&gt;&lt;a href=&quot;#安装Xorg&quot; class=&quot;headerlink&quot; title=&quot;安装Xorg&quot;&gt;&lt;/a&gt;安装Xorg&lt;/h3&gt;&lt;p&gt;X11协议的开源实现，任何Linux上的图形化都需要它。&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pacman -S xorg xterm xorg-xinit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;选择全部安装。&lt;/p&gt;
&lt;h3 id=&quot;安装登录管理器SDDM&quot;&gt;&lt;a href=&quot;#安装登录管理器SDDM&quot; class=&quot;headerlink&quot; title=&quot;安装登录管理器SDDM&quot;&gt;&lt;/a&gt;安装登录管理器SDDM&lt;/h3&gt;&lt;p&gt;又叫显示管理器，用来实现登录界面的图形化。&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pacman -S sddm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 设置开机自启动sddm&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl &lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt; sddm.service&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;安装KDE5-Plasma桌面&quot;&gt;&lt;a href=&quot;#安装KDE5-Plasma桌面&quot; class=&quot;headerlink&quot; title=&quot;安装KDE5 Plasma桌面&quot;&gt;&lt;/a&gt;安装KDE5 Plasma桌面&lt;/h3&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pacman -S plasma kde-applications&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 设置X启动的时候启动plasma&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;nano /etc/X11/xinit/xinitrc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 在最后添加一句 exec startkde&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;默认情况下图形化在&lt;code&gt;tty1&lt;/code&gt;开启，如果你需要调整到&lt;code&gt;tty7&lt;/code&gt;：&lt;br&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;nano /etc/sddm.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 加入以下内容&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[XDisplay]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MinimumVT=7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;重启系统，现在图形化应该已经好了。&lt;/p&gt;
&lt;h2 id=&quot;图形化增强设置&quot;&gt;&lt;a href=&quot;#图形化增强设置&quot; class=&quot;headerlink&quot; title=&quot;图形化增强设置&quot;&gt;&lt;/a&gt;图形化增强设置&lt;/h2&gt;&lt;p&gt;首先增加&lt;code&gt;archlinuxcn&lt;/code&gt;的源，编辑&lt;code&gt;/etc/pacman.conf&lt;/code&gt;文件，增加：&lt;br&gt;&lt;figure class=&quot;highlight ini&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;section&quot;&gt;[archlinuxcn]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#The Chinese Arch Linux communities packages.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;SigLevel&lt;/span&gt; = Optional TrustedOnly&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;Server&lt;/span&gt;   = https://mirrors.xjtu.edu.cn/archlinuxcn/&lt;span class=&quot;variable&quot;&gt;$arch&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;刷新源缓存，并且安装密钥链：&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pacman -Syu&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pacman -S archlinuxcn-keyring&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;安装字体：&lt;br&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 英文字体&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pacman -S adobe-source-code-pro-fonts adobe-sans-pro-fonts ttf-dejavu ttf-droid ttf-oxygen&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 中文字体&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pacman -S adobe-source-han-sans-cn-fonts&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后安装&lt;code&gt;zsh&lt;/code&gt;这个增强版shell，并且用&lt;code&gt;oh-my-zsh&lt;/code&gt;来自动配置它：&lt;br&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pacman -S zsh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 安装oh-my-zsh&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sh -c &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)&lt;/span&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;接着配置&lt;code&gt;zsh&lt;/code&gt;的插件：&lt;br&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pacman -S autojump sudo zsh-syntax-highlighting&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;编辑&lt;code&gt;~/.zshrc&lt;/code&gt;文件，修改：&lt;br&gt;&lt;figure class=&quot;highlight ini&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 主题设置为你喜欢的&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;ZSH_THEME&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;ys&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 启用的插件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;plugins&lt;/span&gt;=(git autojump sudo colored-man-pages)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;并在文件末尾添加你需要的&lt;code&gt;alias&lt;/code&gt;和语法高亮设置：&lt;/p&gt;
&lt;figure class=&quot;highlight gradle&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;alias ll=&lt;span class=&quot;string&quot;&gt;&quot;ls -l&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;alias &lt;span class=&quot;keyword&quot;&gt;grep&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;grep --color=auto&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;regexp&quot;&gt;/usr/&lt;/span&gt;share&lt;span class=&quot;regexp&quot;&gt;/zsh/&lt;/span&gt;plugins&lt;span class=&quot;regexp&quot;&gt;/zsh-syntax-highlighting/&lt;/span&gt;zsh-syntax-highlighting.zsh&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;安装中文输入法和Chromium：&lt;br&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pacman -S fcitx-im fcitx-configtool fcitx-sunpinyin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 如果用 KDM GDM LightDM lxdm等显示管理器，请在 ~/.xprofile 中加入&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; GTK_IM_MODULE=fcitx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; QT_IM_MODULE=fcitx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; XMODIFIERS=&lt;span class=&quot;string&quot;&gt;&quot;@im=fcitx&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 如果用 startx 或者 Slim 启动，则在 ~/.xinitrc 中加入以下代码&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; GTK_IM_MODULE=fcitx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; QT_IM_MODULE=fcitx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; XMODIFIERS=&lt;span class=&quot;string&quot;&gt;&quot;@im=fcitx&quot;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 设置输入法（在图形化界面下运行）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fcitx-configtool&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 安装Chromium&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pacman -S Chromium&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;重启之后，应该就一切正常了。&lt;/p&gt;
&lt;p&gt;还有什么问题？欢迎补充~&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/img/computer/archlinux.jpg&quot; alt=&quot;ArchLinux&quot; title=&quot;ArchLinux&quot;&gt;&lt;/p&gt;
&lt;p&gt;ArchLinux是一款简单，轻量的Linux发行版。由于其&lt;strong&gt;轻量&lt;/strong&gt;、&lt;strong&gt;滚动升级&lt;/strong&gt;的特性，特别适合个人作为日常办公、开发使用。&lt;/p&gt;
&lt;p&gt;虽然稳定性不及Debian/CentOS/RHEL等服务器发行版，但是软件更新快、可自由定制程度高的特性，使得ArchLinux从众多Linux发行版中脱颖而出，受到了广大Linux爱好者的欢迎。其滚动升级的特性，使得基本不用重装系统，一句&lt;code&gt;pacman -Syu&lt;/code&gt;就可以将当前系统“滚”到最新版，平滑升级。当然，这个特性使得ArchLinux必须经常升级（按我的经验，超过一个月不更新的话就不要更新了T_T感觉备份资料准备重装吧…），否则会导致版本差异太大，一次性升级太多的软件包造成依赖关系出问题，俗称“滚挂”。&lt;/p&gt;
&lt;p&gt;但是不管怎么说，这丝毫不能算是ArchLinux的缺点。今天重新配置了一遍ArchLinux的桌面（KDE）环境，做下记录备忘。&lt;/p&gt;
    
    </summary>
    
      <category term="计算机科学" scheme="https://xczh.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/"/>
    
    
      <category term="Linux" scheme="https://xczh.github.io/tags/Linux/"/>
    
      <category term="ArchLinux" scheme="https://xczh.github.io/tags/ArchLinux/"/>
    
  </entry>
  
  <entry>
    <title>关于二重极限一个普遍的错误认为</title>
    <link href="https://xczh.github.io/2016/05/24/%E5%85%B3%E4%BA%8E%E4%BA%8C%E9%87%8D%E6%9E%81%E9%99%90%E4%B8%80%E4%B8%AA%E6%99%AE%E9%81%8D%E7%9A%84%E9%94%99%E8%AF%AF%E8%AE%A4%E4%B8%BA/"/>
    <id>https://xczh.github.io/2016/05/24/关于二重极限一个普遍的错误认为/</id>
    <published>2016-05-24T03:03:28.000Z</published>
    <updated>2016-05-24T03:03:28.000Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/img/math/double_limit.png&quot; alt=&quot;二重极限&quot; title=&quot;double limit&quot;&gt;&lt;/p&gt;
&lt;p&gt;二重极限在高等数学以及数学分析的教学中是难点，但从来都不算重点。因为二重极限定义的复杂性，极限路径有无穷多重可能，于是造成了用定义来计算二重极限基本是不可能的。但是反过来，由定义却很容易找到反例，判定一个二重极限是不存在的。&lt;/p&gt;
&lt;p&gt;我写这篇文章，主要是指出平时在教学过程中很多人都会犯的一个错误，甚至有的授课老师也认为是对的：极坐标换元来计算二重极限。这样就把二重极限化成了一元极限，大大降低了难度，可是，真有那么美好的事情么？&lt;/p&gt;
&lt;p&gt;最后，在批判这种错误结论的同时，我也给出一个我自己计算二重极限简单快捷的方法，以供参考。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;1-几个定义&quot;&gt;&lt;a href=&quot;#1-几个定义&quot; class=&quot;headerlink&quot; title=&quot;1. 几个定义&quot;&gt;&lt;/a&gt;1. &lt;strong&gt;几个定义&lt;/strong&gt;&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;定义1.1 一元函数的一致收敛&lt;/strong&gt;&lt;br&gt;　　设$f(x)$在$I$上有定义，若$\forall \epsilon &amp;gt; 0$，都$\exists \delta$(只与$\epsilon$有关)，当$\forall x\in I$时，总有$|f(x)-A|&amp;lt;\epsilon$，则称$f(x)$一致收敛到$A$，并称$x\to x_0$这个趋向是一致的。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;类似的，二元函数也有一致收敛的定义。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;定义1.2 二元函数的一致收敛&lt;/strong&gt;&lt;br&gt;　　对于二元函数$f(x,y)$，若$\forall \epsilon &amp;gt; 0$，都$\exists \delta$(只与$\epsilon$有关)，当$0&amp;lt;|x-x_0|&amp;lt;\delta$时，总有$|f(x,y)-\varphi (y)|&amp;lt;\epsilon$，则称$f(x,y)$关于$x$一致收敛到$\varphi (y)$，并称$x\to x_0$这个趋向是一致的。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;接下来，我们给出二重极限的存在性定理：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;定理1 二重极限的存在性定理&lt;/strong&gt;&lt;br&gt;　　设$X,Y$是两个实数集，$x_0\in X, y_0\in Y. F(x,y)$定义在$D=(X-\lbrace x_0\rbrace)\times (Y-\lbrace y_0\rbrace)$上且满足：&lt;br&gt;　　(i) $\forall x\in (X-\lbrace x_0\rbrace)$ , $\lim\limits_{y\to y_0} F(x,y)=g(x)$存在;&lt;br&gt;　　(ii)$\forall y\in (Y-\lbrace y_0\rbrace)$, $\lim\limits_{x\to x_0} F(x,y)=\varphi (x)$存在。&lt;br&gt;　　则二重极限$$\lim\limits_{(x,y)\to (x_0,y_0)}F(x,y)$$存在的充要条件为(ii)关于$y$在$y_0$的某个去心邻域内一致收敛。
　　&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;定理1的证明难度不大，故略去。必要性是显然的，充分性可利用&lt;strong&gt;柯西收敛原理&lt;/strong&gt;得到。留给你自己啦~&lt;/p&gt;
&lt;h2 id=&quot;2-为什么不能滥用极坐标换元&quot;&gt;&lt;a href=&quot;#2-为什么不能滥用极坐标换元&quot; class=&quot;headerlink&quot; title=&quot;2. 为什么不能滥用极坐标换元&quot;&gt;&lt;/a&gt;2. &lt;strong&gt;为什么不能滥用极坐标换元&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;好了，现在就来指出，一个通常的误解是什么。为了表述方便，以命题的形式描述一下：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;一个普遍的错误命题 &lt;/strong&gt;&lt;br&gt;　　令$x=\rho\cos\theta,y=\rho\sin\theta$,于是，二重极限$\lim\limits_{(x,y)\to (x_0,y_0)}F(x,y)=A$的充分必要条件是$$\lim\limits_{\rho\to 0^+, \theta\in (0,2\pi)}F(x_0+\rho\cos\theta, y_0+\rho\sin\theta)=A$$&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;font color=&quot;red&quot;&gt;事实上，该条件仅仅是必要的，但并不充分。&lt;/font&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;举例说明，例如二重极限$$\lim\limits_{(x,y)\to (0,0)} \frac{x^2y}{x^4+y^2}$$&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;[错解]&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;　　令$x=\rho\cos\theta,y=\rho\sin\theta$,于是$$\lim\limits_{\rho\to 0^+} \frac{\rho\cos^2\theta\sin\theta}{\rho^2\cos^4\theta+\sin^2\theta}=0$$&lt;br&gt;　　故二重极限$$\lim\limits_{(x,y)\to (0,0)} \frac{x^2y}{x^4+y^2}=0 .$$&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;[正解]&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;　　事实上，由于$$\lim\limits_{x\to 0}f(x,x^2)=\frac{1}{2}$$ $$\lim\limits_{x\to 0}f(x,0)=0$$&lt;br&gt;　　由二重极限的定义，显然该极限不存在.$\Vert$&lt;/p&gt;
&lt;p&gt;可是为什么不能在这里使用极坐标换元呢？&lt;/p&gt;
&lt;p&gt;要说清楚这个理论问题，实际上，我们有下面的定理：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;定理2 二重极限的极坐标换元定理&lt;/strong&gt;&lt;br&gt;　　设$F(x,y)$在$(x_0,y_0)$的某个去心邻域内有定义，则二重极限$$\lim\limits_{(x,y)\to (x_0,y_0)}F(x,y)=A$$的充分必要条件是&lt;br&gt;　　$$\lim\limits_{\rho\to 0^+}F(x_0+\rho\cos\theta, y_0+\rho\sin\theta)=A$$&lt;br&gt;　　对于$\forall \theta \in [0,2\pi]$一致成立。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;证明略去。我以上个例子来说，为什么是不能换的。&lt;/p&gt;
&lt;p&gt;实际上，上例中虽然有$\lim\limits_{\rho\to 0^+}f(x_0+\rho\cos\theta, y_0+\rho\sin\theta)=0$，但并不对$\forall \theta \in [0,2\pi]$一致成立。&lt;/p&gt;
&lt;p&gt;事实上，$\exists \epsilon_0=\frac{1}{3}$，对于$\forall \delta &amp;gt; 0$，都$\exists r=\frac{\delta}{2}$.尽管$0&amp;lt;r&amp;lt;\delta$，但$\exists \theta_0=arcsin\frac{\sqrt{1+4r^2}-1}{2r}$,使得&lt;/p&gt;
&lt;p&gt;$$rsin\theta=\frac{\sqrt{1+4r^2}-1}{2}=r^2[1-(\frac{\sqrt{1+4r^2}-1}{2r})^2]=r^2(1-\sin^2\theta_r)=r^2\cos^2\theta_r$$&lt;/p&gt;
&lt;p&gt;从而&lt;/p&gt;
&lt;p&gt;$$|f(r\cos\theta_r, r\sin\theta_r)-0|=|f(r\cos\theta_r,r^2\cos^2\theta_r)|=\frac{1}{2}&amp;gt;\epsilon_0=\frac{1}{3}. \Vert$$&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;font color=&quot;red&quot;&gt;所以，能换元的关键在于，换完之后的极限关于极角是不是一致的。&lt;/font&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在动手换元之前，多留个心眼吧。0.0&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/img/math/double_limit.png&quot; alt=&quot;二重极限&quot; title=&quot;double limit&quot;&gt;&lt;/p&gt;
&lt;p&gt;二重极限在高等数学以及数学分析的教学中是难点，但从来都不算重点。因为二重极限定义的复杂性，极限路径有无穷多重可能，于是造成了用定义来计算二重极限基本是不可能的。但是反过来，由定义却很容易找到反例，判定一个二重极限是不存在的。&lt;/p&gt;
&lt;p&gt;我写这篇文章，主要是指出平时在教学过程中很多人都会犯的一个错误，甚至有的授课老师也认为是对的：极坐标换元来计算二重极限。这样就把二重极限化成了一元极限，大大降低了难度，可是，真有那么美好的事情么？&lt;/p&gt;
&lt;p&gt;最后，在批判这种错误结论的同时，我也给出一个我自己计算二重极限简单快捷的方法，以供参考。&lt;/p&gt;
    
    </summary>
    
      <category term="数学" scheme="https://xczh.github.io/categories/%E6%95%B0%E5%AD%A6/"/>
    
    
      <category term="微积分" scheme="https://xczh.github.io/tags/%E5%BE%AE%E7%A7%AF%E5%88%86/"/>
    
      <category term="数学分析" scheme="https://xczh.github.io/tags/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>编写一个简单的dll来封装你的接口</title>
    <link href="https://xczh.github.io/2016/01/10/%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84dll%E6%9D%A5%E5%B0%81%E8%A3%85%E4%BD%A0%E7%9A%84%E6%8E%A5%E5%8F%A3/"/>
    <id>https://xczh.github.io/2016/01/10/编写一个简单的dll来封装你的接口/</id>
    <published>2016-01-10T05:25:00.000Z</published>
    <updated>2016-01-09T17:25:00.000Z</updated>
    
    <content type="html">&lt;p&gt;最近刚好有学弟问过我关于dll的一些问题，自己顺便也梳理了一下。关于编写dll，有各种各样的理由：可能是&lt;font color=&quot;red&quot;&gt;出于效率考虑需要将现有的功能重构为dll，也可能是出于商业需求，隐藏具体代码实现的需要仅仅提供接口&lt;/font&gt;。还记得前两年春运的抢票大潮么？360推出的“360抢票3代”，验证码自动识别功能其中的识别接口就是通过dll封装的。当然，今天不讨论这些具体的应用场景，来看看最简单的dll怎么编写。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/computer/dll_error.jpg&quot; alt=&quot;dll_error&quot; title=&quot;Dll Error&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;Dll-Main入口&quot;&gt;&lt;a href=&quot;#Dll-Main入口&quot; class=&quot;headerlink&quot; title=&quot;Dll Main入口&quot;&gt;&lt;/a&gt;Dll Main入口&lt;/h2&gt;&lt;p&gt;像普通的控制台程序有个main入口函数一样，DllMain函数是dll的入口函数。只不过，它可有可无，并不是一定需要有的。当载入该dll时，如果DllMain函数存在，就会被调用。关于DllMain，具体可参考&lt;a href=&quot;https://msdn.microsoft.com/zh-cn/data/ms682583&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MSDN相关介绍&lt;/a&gt;。&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;BOOL APIENTRY &lt;span class=&quot;title&quot;&gt;DllMain&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;( HMODULE hModule,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                       DWORD  ul_reason_for_call,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                       LPVOID lpReserved&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                     )&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;switch&lt;/span&gt; (ul_reason_for_call)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; DLL_PROCESS_ATTACH:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; DLL_THREAD_ATTACH:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; DLL_THREAD_DETACH:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; DLL_PROCESS_DETACH:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; TRUE;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;demo-h-头文件&quot;&gt;&lt;a href=&quot;#demo-h-头文件&quot; class=&quot;headerlink&quot; title=&quot;demo.h 头文件&quot;&gt;&lt;/a&gt;demo.h 头文件&lt;/h2&gt;&lt;p&gt;关于头文件，写法有很多，这里给一个参考。&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;ifndef&lt;/span&gt; _H_FILE_DEMO&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;define&lt;/span&gt; _H_FILE_DEMO&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;windows.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;define&lt;/span&gt; C_DLL_API __declspec(dllexport)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 从本dll导出的类&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; C_DLL_API CC_dll &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CC_dll(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// &lt;span class=&quot;doctag&quot;&gt;TODO:&lt;/span&gt; 在此添加方法。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 从本dll导出的变量&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;extern&lt;/span&gt; C_DLL_API &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; nC_dll;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 从本dll导出的函数(保持导出名不变)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;C&quot;&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;C_DLL_API &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 从本dll导出的函数(C++编译器会改变函数名)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;C_DLL_API &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;sub&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;endif&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;demo-cpp-实现部分&quot;&gt;&lt;a href=&quot;#demo-cpp-实现部分&quot; class=&quot;headerlink&quot; title=&quot;demo.cpp 实现部分&quot;&gt;&lt;/a&gt;demo.cpp 实现部分&lt;/h2&gt;&lt;p&gt;这里实现一个简单的加减法。&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;demo.h&quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// nC_dll变量会被导出&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;C_DLL_API &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; nC_dll=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// add函数会被导出&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;C_DLL_API &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; x, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; y)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; x + y;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// sub函数会被导出&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;C_DLL_API &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;sub&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; x, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; y)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; x - y;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 导出类的构造函数实现&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CC_dll::CC_dll()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;验证上述dll工作&quot;&gt;&lt;a href=&quot;#验证上述dll工作&quot; class=&quot;headerlink&quot; title=&quot;验证上述dll工作&quot;&gt;&lt;/a&gt;验证上述dll工作&lt;/h2&gt;&lt;p&gt;以上代码可以在Visual Studio 2015下编译通过，生成demo.dll文件。现在可以在C语言下调用该dll，验证上述功能的正确性。&lt;/p&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;调用dll的方法分为静态调用和动态调用两种&lt;/font&gt;，百度上有很多介绍了。所谓静态调用，就是在外部程序运行时就自动加载该dll，不太灵活，资源利用也不太充分，但是简单快捷。&lt;/p&gt;
&lt;p&gt;静态调用只需要在目标程序代码前加入预编译指令，声明要调用的函数是外部函数，这样就可以直接通过函数名调用了，非常简单:&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;pragma&lt;/span&gt; comment(lib,&lt;span class=&quot;string&quot;&gt;&quot;demo.lib&quot;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_declspec(dllimport) &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; c;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    c = add(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;缺点是必须要有dll编译时同时生成的lib文件，并且资源利用不是太充分，也不灵活。&lt;/p&gt;
&lt;p&gt;如果没有对应的lib文件，那就只能用动态调用了。格式如下：&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; c;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 声明函数指针&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; (*add)(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    add = &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 通过文件名动态加载dll获得句柄&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    HINSTANCE dll = LoadLibrary(TEXT(&lt;span class=&quot;string&quot;&gt;&quot;demo.dll&quot;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (dll == &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;error: dll not found.\n&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 通过函数名获得函数地址&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    add = (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;(*)(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;))GetProcAddress(dll, &lt;span class=&quot;string&quot;&gt;&quot;add&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (add == &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;error no: %d\n&quot;&lt;/span&gt;, GetLastError());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    c = add(&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;%d\n&quot;&lt;/span&gt;, c);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    getchar();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;需要注意的是，在通过函数名获得函数地址的时候，如果没有指定&lt;code&gt;extern &amp;quot;C&amp;quot;&lt;/code&gt;编译，那么函数名会被C++编译器修改，造成找不到函数入口地址(add是空指针)。此时，可以用&lt;code&gt;dumpbin&lt;/code&gt;工具查看dll中的导出符号表来确定函数名。&lt;code&gt;dumpbin&lt;/code&gt;通常位于Visual Studio安装目录的&lt;code&gt;vc/bin&lt;/code&gt;目录下，通过命令&lt;code&gt;dumpbin /EXPORTS demo.dll&lt;/code&gt;可以查看导出函数名。&lt;/p&gt;
&lt;p&gt;&lt;br&gt;&lt;br&gt;以上全部代码在Visual Studio 2015下测试并编译通过。&lt;br&gt;那么到这里，一个简单的dll就制作好啦。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;最近刚好有学弟问过我关于dll的一些问题，自己顺便也梳理了一下。关于编写dll，有各种各样的理由：可能是&lt;font color=&#39;red&#39;&gt;出于效率考虑需要将现有的功能重构为dll，也可能是出于商业需求，隐藏具体代码实现的需要仅仅提供接口&lt;/font&gt;。还记得前两年春运的抢票大潮么？360推出的“360抢票3代”，验证码自动识别功能其中的识别接口就是通过dll封装的。当然，今天不讨论这些具体的应用场景，来看看最简单的dll怎么编写。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/computer/dll_error.jpg&quot; alt=&quot;dll_error&quot; title=&quot;Dll Error&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="计算机科学" scheme="https://xczh.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/"/>
    
    
      <category term="C&Cpp" scheme="https://xczh.github.io/tags/C-Cpp/"/>
    
      <category term="读书笔记" scheme="https://xczh.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>《C陷阱与缺陷》读书笔记</title>
    <link href="https://xczh.github.io/2016/01/09/%E3%80%8AC%E9%99%B7%E9%98%B1%E4%B8%8E%E7%BC%BA%E9%99%B7%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    <id>https://xczh.github.io/2016/01/09/《C陷阱与缺陷》读书笔记/</id>
    <published>2016-01-08T17:27:28.000Z</published>
    <updated>2016-01-08T17:27:28.000Z</updated>
    
    <content type="html">&lt;p&gt;早就听说Andrew Koenig这本经典著作，最近也是闲下来，抓紧寒假回家前的时间读了一遍。书里主要介绍了C语言各种晦涩的语言特性（俗称“坑”），以及容易犯的错误，也算是对以后开发的警示吧。一遍下来理解肯定不是太到位，把一些易错点记录下来。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/computer/c_traps_and_pitfalls_cover.jpg&quot; alt=&quot;封面图&quot; title=&quot;C Traps and Pitfalls&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;1-理解函数声明&quot;&gt;&lt;a href=&quot;#1-理解函数声明&quot; class=&quot;headerlink&quot; title=&quot;1.理解函数声明&quot;&gt;&lt;/a&gt;1.理解函数声明&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;问题：如何调用首地址为0的子程序？&lt;br&gt;答案：&lt;code&gt;(*(void (*))0)();&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;理解此声明的关键在于明白，&lt;font color=&quot;red&quot;&gt;任何一个声明只要把标识符去掉，便转化为相应的类型转化符&lt;/font&gt;。例如：&lt;br&gt;&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt; (*h)(); &lt;span class=&quot;comment&quot;&gt;// 声明一个返回类型为浮点型的函数指针&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;那么，相应的类型转化符：&lt;br&gt;&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt; (*)())a; &lt;span class=&quot;comment&quot;&gt;// 强制类型转化，将a转化为上述的指针类型&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;有了这个基础，不难理解答案中的语句含义。&lt;/p&gt;
&lt;h2 id=&quot;2-求值顺序&quot;&gt;&lt;a href=&quot;#2-求值顺序&quot; class=&quot;headerlink&quot; title=&quot;2.求值顺序&quot;&gt;&lt;/a&gt;2.求值顺序&lt;/h2&gt;&lt;p&gt;需要注意的是，&lt;font color=&quot;red&quot;&gt;ANSI只对 &amp;amp;&amp;amp; 、 || 、? : 和 , 四个运算符存在固定的求值顺序&lt;/font&gt;，其他的求值顺序都是不确定的，依赖于编译器的具体实现，因而不能依靠这种特性保证程序的正常运行。例如：&lt;br&gt;&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; n; )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    y[i] = x[i++];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这种写法的正确性是不能得到保证的，因为求值顺序是不确定的。正确的写法是：&lt;br&gt;&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; n; i++)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    y[i] = x[i];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;同样，在函数调用中求值顺序也是不确定的：&lt;br&gt;&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;f(x,y);    &lt;span class=&quot;comment&quot;&gt;//x和y的求值顺序是不确定的&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;g((x,y));  &lt;span class=&quot;comment&quot;&gt;//这里g的参数是一个，由于是逗号运算符，求值顺序是确定的，先x后y&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;3-命名冲突与static修饰符&quot;&gt;&lt;a href=&quot;#3-命名冲突与static修饰符&quot; class=&quot;headerlink&quot; title=&quot;3.命名冲突与static修饰符&quot;&gt;&lt;/a&gt;3.命名冲突与static修饰符&lt;/h2&gt;&lt;p&gt;一个文件中的全局变量，如果不需要共享，应该用&lt;code&gt;static&lt;/code&gt;修饰符加以限制，以防止其他文件中出现误操作或者命名冲突。&lt;/p&gt;
&lt;h2 id=&quot;4-宏定义替换函数&quot;&gt;&lt;a href=&quot;#4-宏定义替换函数&quot; class=&quot;headerlink&quot; title=&quot;4.宏定义替换函数&quot;&gt;&lt;/a&gt;4.宏定义替换函数&lt;/h2&gt;&lt;p&gt;函数调用的开销很大。为了提高效率，对于频繁调用的函数常采用宏定义进行替换。这里需要注意，&lt;font color=&quot;red&quot;&gt;宏定义的“伪函数”在调用时要避免传递“奇怪的参数”，而且要尽量避免嵌套调用，不能将宏定义成语句。&lt;/font&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;define&lt;/span&gt; max(a,b) ((a)&amp;gt;(b)?(a):(b))&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 嵌套调用的例子&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;max(a,max(b,max(c,d)));  &lt;span class=&quot;comment&quot;&gt;// 试着展开，最后的表达式非常长&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 奇怪的参数例子&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;big = x[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;i = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; (i &amp;lt; n)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    big = max (big, x[i++]); &lt;span class=&quot;comment&quot;&gt;// 试着展开，你会发现并不会像你想象那样正常工作&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 语句例子 (assert宏)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;define&lt;/span&gt; assert(e) &lt;span class=&quot;meta-keyword&quot;&gt;if&lt;/span&gt; (!e) assert_error(__FILE__, __LINE__)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (x &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; y &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    assert(x &amp;gt; y);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    assert(y &amp;gt; x);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 试着展开上述语句，你会发现问题所在&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 将assert定义为表达式就不会有这样的问题&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;define&lt;/span&gt; assert(e) ((void) ((e)||_assert_error(__FILE__, __LINE__)))&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;最后，类型定义使用&lt;code&gt;typedef&lt;/code&gt;，不要使用宏，会有麻烦。&lt;/p&gt;
&lt;h2 id=&quot;最后&quot;&gt;&lt;a href=&quot;#最后&quot; class=&quot;headerlink&quot; title=&quot;最后&quot;&gt;&lt;/a&gt;最后&lt;/h2&gt;&lt;p&gt;以上应该列举了最容易犯错的情况，建议大家有时间读读这本书~&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;早就听说Andrew Koenig这本经典著作，最近也是闲下来，抓紧寒假回家前的时间读了一遍。书里主要介绍了C语言各种晦涩的语言特性（俗称“坑”），以及容易犯的错误，也算是对以后开发的警示吧。一遍下来理解肯定不是太到位，把一些易错点记录下来。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/computer/c_traps_and_pitfalls_cover.jpg&quot; alt=&quot;封面图&quot; title=&quot;C Traps and Pitfalls&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="计算机科学" scheme="https://xczh.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/"/>
    
    
      <category term="C&Cpp" scheme="https://xczh.github.io/tags/C-Cpp/"/>
    
      <category term="读书笔记" scheme="https://xczh.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>crontab的使用</title>
    <link href="https://xczh.github.io/2015/08/14/crontab%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <id>https://xczh.github.io/2015/08/14/crontab的使用/</id>
    <published>2015-08-14T05:43:49.000Z</published>
    <updated>2016-05-24T02:24:00.396Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/img/computer/crontab.jpg&quot; alt=&quot;crontab&quot; title=&quot;Crontab Syntax&quot;&gt;&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;熟记上面各个位置的含义，就没有问题了。几个小问题注意下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在crontab中运行命令的时候，不要默认以为他知道你所有的环境变量，实际上他并不知道。所以命令、文件路径最好都写绝对路径，如php应该写成/usr/bin/php等等，一些很奇怪的错误往往由于环境变量的问题产生&lt;/li&gt;
&lt;li&gt;在crontab中%是有特殊意义的，如果硬要加%请用\转义，写成\%，比如&lt;code&gt;date +%Y%m%d&lt;/code&gt;是无法执行的，应该写成&lt;code&gt;date +\%Y\%m\%d&lt;/code&gt;，man原文解释如下：Percent-signs (%) in the command, unless escaped with backslash (), will be changed into newline characters, and all data after the first % will be sent to the command as standard input.&lt;/li&gt;
&lt;li&gt;如果环境变量一直不正常，可以尝试写shell然后在sh文件里面强行export环境变量&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/img/computer/crontab.jpg&quot; alt=&quot;crontab&quot; title=&quot;Crontab Syntax&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="计算机科学" scheme="https://xczh.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/"/>
    
    
      <category term="linux" scheme="https://xczh.github.io/tags/linux/"/>
    
      <category term="运维" scheme="https://xczh.github.io/tags/%E8%BF%90%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://xczh.github.io/2015/08/12/hello-world/"/>
    <id>https://xczh.github.io/2015/08/12/hello-world/</id>
    <published>2015-08-12T12:46:25.000Z</published>
    <updated>2016-05-24T02:24:00.396Z</updated>
    
    <content type="html">&lt;p&gt;想了很久，终于下定决心要开博客，平时写写东西，总结知识，记录生活。&lt;/p&gt;
&lt;p&gt;文章会设置有评论功能，欢迎大家捧场。&lt;/p&gt;
&lt;p&gt;如果你有好的东西一起分享，可以给我邮件 :) 我会及时回复的&lt;/p&gt;
&lt;p&gt;这样就算开头了，希望自己能坚持下去，尽量不弃坑&amp;gt;.&amp;lt;&lt;/p&gt;
&lt;h2 id=&quot;最后一句你懂的&quot;&gt;&lt;a href=&quot;#最后一句你懂的&quot; class=&quot;headerlink&quot; title=&quot;最后一句你懂的&quot;&gt;&lt;/a&gt;最后一句你懂的&lt;/h2&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#!/usr/bin/env python&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#coding=utf8&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;Hello World!&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;p&gt;想了很久，终于下定决心要开博客，平时写写东西，总结知识，记录生活。&lt;/p&gt;
&lt;p&gt;文章会设置有评论功能，欢迎大家捧场。&lt;/p&gt;
&lt;p&gt;如果你有好的东西一起分享，可以给我邮件 :) 我会及时回复的&lt;/p&gt;
&lt;p&gt;这样就算开头了，希望自己能坚持下去，尽量不弃坑&amp;gt;.&amp;lt;
    
    </summary>
    
      <category term="心情随笔" scheme="https://xczh.github.io/categories/%E5%BF%83%E6%83%85%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="生活" scheme="https://xczh.github.io/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
</feed>
